<!DOCTYPE html>
<meta charset="utf-8">
<title>bubble chart</title>
<body>
    <script src="https://d3js.org/d3.v5.js"></script>
    <script>
        var width = 960,
            height = 500,
            maxRadius = 12;

        var n = 200,
            m = 10;

        var color = d3.scaleOrdinal(d3.schemeCategory10)
            .domain(d3.range(m));

        var clusters = new Array(m);

        var nodes = d3.range(n).map(function() {
          var i = Math.floor(Math.random() * m),
              r = Math.sqrt((i + 1) / m * -Math.log(Math.random())) * maxRadius,
              d = {cluster: i, radius: r};
          if (!clusters[i] || (r > clusters[i].radius)) clusters[i] = d;
          return d;
        });

        var forceCollide = d3.forceCollide()
            .radius(function(d) { return d.radius + 1.5; })
            .iterations(1);

        var force = d3.forceSimulation()
            .nodes(nodes)
            .force("center", d3.forceCenter())
            .force("collide", forceCollide)
           // .force("cluster", forceCluster)
            .force("gravity", d3.forceManyBody(30))
            .force("x", d3.forceX().strength(.7))
            .force("y", d3.forceY().strength(.7))
            .on("tick", tick);

        var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append('g')
            .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');

        var g = svg.append("g")
            .attr("width", width)
            .attr("height", height);

            // zoom and pan
        var zoom = d3.zoom()
            .on("zoom",function() {
                g.attr("transform", d3.event.transform);
                g.selectAll(".nodee")
            });
        svg.call(zoom)

        var circle = g.selectAll("circle")
            .data(nodes)
            .enter()
            .append("circle")
            .attr("r", function(d) { return d.radius; })
            .style("fill", function(d) { return color(d.cluster); });

        function tick() {
          circle
              .attr("cx", function(d) { return d.x; })
              .attr("cy", function(d) { return d.y; });
        }

        circle.call(
            d3.drag()
            .on("start", dragstarted)
            .on("drag", dragged)
            .on("end", dragended));
        
        function dragstarted(d) {
            d3.event.sourceEvent.stopPropagation();
            if (!d3.event.active) force.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(d) {
            d.fx = d3.event.x;
            d.fy = d3.event.y; 
        }

        function dragended(d) {
            if (!d3.event.active) force.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }
        

    </script>